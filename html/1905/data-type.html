<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>js中数据类型及相关判断方法</title>
</head>
<body>
    <div style="font-size: 20px">js中数据类型及相关判断方法</div>
</body>
<script>
    /**
     * @desc: js中有5种简单数据类型（也称为基本数据类型）
     * Null,Undefined,Number,String,Boolean，es6增加symbol类型
     * symbol不需要new定义，let test = Symbol('test symbol'),所以instanceof不能判断它
     * 1种复杂的数据类型(引用类型)Object,Object本质上是由一组无序的键值对组成的
     * Object,Array,Function,Date,RegExp则属于引用类型
    */

    /**
     * @desc: 判断数据类型
     * 首选Object.prototype.toString.call()
     * 其它方式typeof、constructor、instanceof，有些不准确
     */

    /**
     * @desc: Object.prototype.toString.call
     * 比较准确
    */
    console.log('%cObject.prototype.toString.call-----------', "font-size: 20px; color: red;");
    console.log('symbol:', Object.prototype.toString.call(Symbol())); // "[object Symbol]"
    console.log('Math:', Object.prototype.toString.call(Math)); // "[object Math]"
    console.log('string:', Object.prototype.toString.call('')); // "[object String]"
    console.log('[]:', Object.prototype.toString.call([])); // "[object Array]"
    console.log('{}:', Object.prototype.toString.call({})); // "[object Object]"
    console.log('true:', Object.prototype.toString.call(true)); // "[object Boolean]"
    console.log('undefined:', Object.prototype.toString.call(undefined)); // "[object Undefined]"
    console.log('null:', Object.prototype.toString.call(null)); // "[object Null]"
    console.log('NaN:', Object.prototype.toString.call(NaN)); // "[object Number]"
    console.log('number:', Object.prototype.toString.call(22)); // "[object Number]"

    console.log('new Number:', Object.prototype.toString.call(new Number())); // "[object Number]"
    console.log('new Function', Object.prototype.toString.call(new Function())); // "[object Function]"
    console.log('new RegExp', Object.prototype.toString.call(new RegExp())); // "[object Regexp]"
    console.log('new Date', Object.prototype.toString.call(new Date())); // "[object Date]"
    console.log('new Error', Object.prototype.toString.call(new Error())); // "[object Error]"

    console.log('String:', Object.prototype.toString.call(String)); // "[object Function]"
    console.log('Number:', Object.prototype.toString.call(Number)); // "[object Function]"
    console.log('Date:', Object.prototype.toString.call(Date)); // "[object Function]"
    console.log('RegExp:', Object.prototype.toString.call(RegExp)); // "[object Function]"
    console.log('Array:', Object.prototype.toString.call(Array)); // "[object Function]"
    console.log('Object:', Object.prototype.toString.call(Object)); // "[object Function]"

    /**
     * @desc: typeof返回字符
     * 返回结果number, string, object, function, undefined, boolean, symbol七种数据类型
     * null和array不准确，返回的是'object'
    */
    console.log('%cTypeof---------', 'font-size: 20px; color: red;');
    console.log('number:', typeof 2); // "number"
    console.log('NaN:', typeof NaN); // "number"
    console.log('string:', typeof ''); // "string"
    console.log('undefined:', typeof undefined); // "undefined"
    console.log('symbol:', typeof Symbol()); // "symbol"
    console.log('boolean:', typeof true); // "boolean"
    console.log('null:', typeof null); // "object" 不准确
    console.log('[]:', typeof []); // "object"
    console.log('{}:', typeof {}); // "object"
    console.log('new Boolean:', typeof new Boolean()); // "object"
    console.log('new Number:', typeof new Number()); // "object"
    console.log('new Array:',typeof new Array()); // "object"
    console.log('new Date:', typeof new Date()); // "object"
    console.log('new RegExp:', typeof new RegExp()); // "object"
    console.log('new Function:', typeof new Function()); // "function"

    console.log('Date:', typeof Date); // "function"
    console.log('Number:', typeof Number); // "function"

    /**
     * @desc: instanceof
     * 判断A是否是B的实例，用来测试一个对象在其原型链中是否存在一个构造函数的prototype属性
     * 即能在实例的 原型对象链 中找到该构造函数的prototype属性所指向的 原型对象
     * instance.[__proto__...] === instance.constructor.prototype
     * array不准确，认为是Object，symbol也不能准确判断
     * 不能检测null和undefined
     * number，string，boolean判断比较严格，没有通过new关键字实例化定义的判断不了
     * 可以用来检测引用数据类型
     *
    */
    console.log('%cInstanceof----------', 'font-size: 20px; color: red;');
    console.log('[]Array:', [] instanceof Array); // true
    console.log('[]Object:', [] instanceof Object); // true
    console.log('{}Object:', {} instanceof Object); // true
    console.log('{}Array:', {} instanceof Array); // false
    console.log('new Date:', new Date() instanceof Date); // true
    console.log('new String:', new String() instanceof String); // true
    console.log('string:', '' instanceof String); // false
    console.log('new Number:', new Number() instanceof Number); // true
    console.log('number:', Number(2) instanceof Number); // false
    console.log('new Boolean:', new Boolean() instanceof Boolean); // true
    console.log('true:', true instanceof Boolean); // false
    console.log('new Error:', new Error() instanceof Error); // true
    console.log('Symbol:', Symbol() instanceof Symbol); // false 不准确

    console.log('new Array:', new Array() instanceof Array); // true
    console.log('new Array:', new Array() instanceof Object); // true
    console.log('new RegExp:', new RegExp() instanceof RegExp); // true
    console.log('new RegExp:', new RegExp() instanceof Object); // true

    console.log('Array:', Array instanceof Function); // true
    console.log('Object:', Object instanceof Function); // true
    console.log('Function:', Function instanceof Object); // true

    /**
     * @desc: constructor
     * 不能判断null和undefined
    */
    console.log('%cConstructor---------', 'font-size: 20px; color: red;');
    console.log('[]', [].constructor === Array); // true
    console.log('[]', [].constructor === Object); // false
    console.log('{}', {}.constructor === Object); // true
    console.log('new Array', (new Array()).constructor === Array); // true
    console.log('new Object', (new Object()).constructor === Object); // true
    console.log('new Number', (new Number()).constructor === Number); // true
    console.log('new Error', (new Error()).constructor === Error); // true
    console.log('new Date', (new Date()).constructor === Date); // true
    console.log('number', Number(2).constructor === Number); // true
    console.log('string', String(2).constructor === String); // true
    console.log('String', String.constructor === Function); // true
    console.log('Error', Error.constructor === Function); // true
    console.log('Symbol', Symbol().constructor === Symbol); // true
</script>
</html>
